# Supabase Integration Guide

This guide will help you set up and use Supabase in your AsianTrade Connect application.

## What is Supabase?

Supabase is an open-source Firebase alternative that provides:
- PostgreSQL Database
- Authentication
- Storage
- Realtime subscriptions
- Edge Functions

## Setup Instructions

### 1. Create a Supabase Account

1. Go to [supabase.com](https://supabase.com/) and sign up for a free account
2. Create a new project
3. Note your project URL and anon key from the API settings

### 2. Configure Environment Variables

1. Create a `.env` file in your project root (copy from `.env.example`)
2. Add your Supabase credentials:

```
VITE_SUPABASE_URL=your_supabase_url_here
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key_here
```

### 3. Create Database Tables

In your Supabase dashboard, create the following tables:

#### Brands Table
```sql
create table brands (
  id bigint generated by default as identity primary key,
  name text not null,
  logo_url text,
  description text,
  website text,
  created_at timestamp with time zone default now()
);
```

#### News Table
```sql
create table news (
  id bigint generated by default as identity primary key,
  title text not null,
  content text not null,
  image_url text,
  published_at timestamp with time zone not null,
  created_at timestamp with time zone default now()
);
```

#### Careers Table
```sql
create table careers (
  id bigint generated by default as identity primary key,
  title text not null,
  description text not null,
  requirements text not null,
  location text not null,
  is_active boolean default true,
  created_at timestamp with time zone default now()
);
```

### 4. Set Up Storage Buckets

1. In your Supabase dashboard, go to Storage
2. Create a new bucket called `public` (or use any name you prefer)
3. Set the bucket's privacy to public or adjust as needed
4. Create folders within your bucket (e.g., `uploads`, `brands`, `news`)

## Using Supabase in Your Application

### Authentication

```typescript
// Sign in
const { auth } = useSupabase();
const { success, error } = await auth.signInWithEmail(email, password);

// Sign out
await auth.signOut();

// Check if authenticated
if (auth.isAuthenticated) {
  // User is logged in
}
```

### Database

```typescript
// Get all records
const { db } = useSupabase();
const { data, error } = await db.brands.getAll();

// Get a single record
const { data, error } = await db.brands.getById(1);

// Create a record
const { data, error } = await db.brands.create({
  name: 'Brand Name',
  logo_url: 'https://example.com/logo.png',
  description: 'Brand description',
  website: 'https://example.com'
});

// Update a record
const { data, error } = await db.brands.update(1, {
  name: 'Updated Brand Name'
});

// Delete a record
const { error } = await db.brands.delete(1);
```

### Storage

```typescript
// Upload a file
const { storage } = useSupabase();
const storageService = new SupabaseStorageService('public');
const { data, error } = await storageService.uploadFile('path/to/file.jpg', file);

// Get a public URL
const url = storageService.getPublicUrl('path/to/file.jpg');

// List files
const { data, error } = await storageService.listFiles('folder');

// Delete a file
const { error } = await storageService.deleteFile('path/to/file.jpg');
```

## Storage Management Page

The application includes a dedicated Storage Management page at `/admin/storage` where you can:

1. Upload files to Supabase storage
2. Browse existing files
3. Delete files
4. Get public URLs for files
5. Manage different folders

## Additional Resources

- [Supabase Documentation](https://supabase.com/docs)
- [Supabase JavaScript Client](https://supabase.com/docs/reference/javascript/introduction)
- [Supabase Storage Guide](https://supabase.com/docs/guides/storage)
